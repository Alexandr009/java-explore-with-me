# java-explore-with-me


# Feature: Subscriptions - Подписки на других пользователей

## Pull Request

[Реализация функциональности подписок](https://github.com/Alexandr009/java-explore-with-me/pull/3)

## Описание

Функциональность подписок позволяет пользователям подписываться на других пользователей и получать их события в виде новостной ленты.

## API Endpoints

### Управление подписками

#### Добавить подписку

```
POST /users/{user-Id}/followers/{follower-Id}
```

Добавляет пользователя `follower-Id` в список подписчиков пользователя `user-Id`.

**Ответ:**`201 Created` - объект `UserFollowersDto` с информацией о пользователе и его подписчиках.

#### Получить подписчиков пользователя

```
GET /users/{user-Id}/followers
```

Возвращает список подписчиков указанного пользователя.

**Ответ:**`200 OK` - объект `UserFollowersDto`.

#### Удалить подписку

```
DELETE /users/{user-Id}/followers/{follower-Id}
```

Удаляет пользователя `follower-Id` из списка подписчиков пользователя `user-Id`.

**Ответ:**`204 No Content`.

### Получение событий

#### Получить события пользователя (для подписчика)

```
GET /users/{user-Id}/events/followers?from={from}&size={size}
```

Возвращает опубликованные события указанного пользователя с пагинацией.

**Параметры:**

* `from` - начальная позиция (по умолчанию: 0)
* `size` - размер страницы (по умолчанию: 10)

**Ответ:**`200 OK` - массив объектов `EventFullDto`.

#### Получить события всех подписок

```
GET /users/events/{follower-Id}/followers?from={from}&size={size}
```

Возвращает события всех пользователей, на которых подписан `follower-Id`.

**Параметры:**

* `from` - начальная позиция (по умолчанию: 0)
* `size` - размер страницы (по умолчанию: 10)

**Ответ:**`200 OK` - массив объектов `EventFullDto`.

## Валидация и ограничения

### Добавление подписки

* **409 Conflict** - пользователь пытается подписаться на самого себя
* **404 Not Found** - пользователь или подписчик не найдены

### Получение событий

* **400 Bad Request** - некорректные параметры пагинации (отрицательные значения, нулевой размер)
* **404 Not Found** - пользователь не найден

### Удаление подписки

* **404 Not Found** - пользователь или подписчик не найдены

## Структуры данных

### UserFollowersDto

```json
{
  "id": 1,
  "name": "Имя пользователя",
  "email": "email@example.com",
  "followers": [
    {
      "id": 2,
      "name": "Подписчик 1",
      "email": "follower1@example.com"
    }
  ]
}
```

### EventFullDto

Стандартная структура события с полной информацией включая:

* Базовые поля события
* Информацию об инициаторе
* Количество подтвержденных заявок
* Количество просмотров

## Примеры использования

### Подписаться на пользователя

```bash
curl -X POST "http://localhost:8080/users/1/followers/2"
```

### Получить новостную ленту

```bash
curl "http://localhost:8080/users/events/2/followers?from=0&size=10"
```

### Отписаться от пользователя

```bash
curl -X DELETE "http://localhost:8080/users/1/followers/2"
```

## Техническая реализация

* **Контроллеры:**`FollowerController`, `PrivateEventsController`
* **Сервисы:**`UserService`, `EventService`
* **Репозитории:**`UserRepository`, `EventRepository`
* **Модели:** Связь Many-to-Many между пользователями через поле `follower`
